<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>WDC Lifecycle and Phases</title>
  <meta name="description" content="Connect to your web data from Tableau.">

  <link rel="shortcut icon" type="image/png" href="/assets/logo.png">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/api_ref.css">
  <link rel="stylesheet" href="/css/github-highlight.css">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

  <body>
    <div class="container">
        <header class="site-header">
  <div class="wrapper">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand navbar-brand-logo" href="/#">Tableau Web Data Connector</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/docs/">Docs</a></li>
            <li><a href="/ref/api_ref">API Reference</a></li>
            <li><a href="/community/community_home">Community Connectors</a></li>
            <li><a href="/news/news_home">What's New?</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="tableauIcon"><a target="_blank" href="http://tableau.com"><img src="/assets/logo.png" alt="Tableau Developers" class="logo" /></a></li>
            <li><a target="_blank" href="https://github.com/tableau/webdataconnector"><span class="icon icon--github" title="WDC on GitHub" alt="WDC on GitHub"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  </div>
</header>

        
            <html class="minimal">
<body>
<nav class="tsd-navigation secondary">
	<ul>
		<li>
			<h5>Overview</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs" class="tsd-kind-icon">Get Started</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_tutorial" class="tsd-kind-icon">Tutorial</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_use_in_tableau" class="tsd-kind-icon">Use a WDC in Tableau</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Basic Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_phases" class="tsd-kind-icon">WDC Lifecycle and Phases</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_simulator" class="tsd-kind-icon">Simulator and Samples</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_library_versions" class="tsd-kind-icon">API Versioning</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_hosting_and_submissions" class="tsd-kind-icon">Hosting and Submitting to Community Portal</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Advanced Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_custom_init_and_shutdown" class="tsd-kind-icon">Custom Initialization and Shutdown</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_incremental_refresh" class="tsd-kind-icon">Incremental Refresh</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_authentication" class="tsd-kind-icon">WDC Authentication</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_cors" class="tsd-kind-icon">Working with CORS</a>
				</li>
			</ul>
        </li>
        <li>
			<h5>Advanced Tutorials</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_multi_table_tutorial" class="tsd-kind-icon">Multi Table Tutorial</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_oauth_tutorial" class="tsd-kind-icon">Node Proxy with OAuth 2.0 Tutorial</a>
				</li>-->
            </ul>
        </li>
        <li>
			<h5>Reference</h5>
			<ul>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a target="_blank" href="/ref/api_ref" class="tsd-kind-icon">API Reference</a>
                </li>-->
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_ref_date_formats" class="tsd-kind-icon">Supported Date Formats</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_resources" class="tsd-kind-icon">Resources</a>
				</li>-->
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_faq" class="tsd-kind-icon">FAQ</a>
				</li>
            </ul>
        </li>
    <ul>
</nav>
<div class="content-wrap docs-content-wrap">
    <h1>WDC Lifecycle and Phases</h1>
    <article class="post">

  <div class="post-content">
    <p>This document explains the overall lifecycle  of a Tableau Web Data Connector. It is recommended that you understand the material
from the Get Started section before diving into this material.</p>

<p>A WDC is always run with an associated phase.  Tableau loads
the connector inside a web browser at different times and in distinct phases. 
This document will explain each of these phases and when each one runs.</p>

<ul>
  <li>
    <p><a href="#diagram">Lifecycle Diagram</a></p>
  </li>
  <li>
    <p><a href="#phase-one">First phase: Interact with the user (if necessary)</a></p>
  </li>
  <li>
    <p><a href="#phase-two">Second phase: Gather data</a></p>
  </li>
  <li>
    <p><a href="#phase-three">Alternative phase: Display authentication UI
(refresh extract)</a></p>
  </li>
</ul>

<h2 id="diagram">Lifecycle Diagram</h2>

<p>At a high level, the WDC lifecycle is as follows:</p>

<p><img class="img-responsive docs-img" src="/assets/wdc_flow.png" alt="" /></p>

<p><strong>Note</strong>: This is slightly simplified.
For example, <code class="highlighter-rouge">shutdown</code> and <code class="highlighter-rouge">shutdownCallback</code> were left out, but both 
of these events take place at the end of each phase as well (they mirror 
<code class="highlighter-rouge">init</code> and <code class="highlighter-rouge">initCallback</code>).</p>

<h2 id="phase-one">Interactive phase: Interact with the user</h2>

<ul>
  <li>
    <p>Tableau launches the web data connector in the interactive phase.  This
  could be Tableau Desktop, or the Simulator.</p>

    <p>In the interactive phase, the following actions occur:</p>

    <ul>
      <li>
        <p>The connector’s init method is called by Tableau. A connector will have a default 
init method if not provided by the WDC Developer (see <a href="/docs/wdc_custom_init_and_shutdown.html">Custom
Initialization  and Shutdown for more details</a>).</p>
      </li>
      <li>
        <p>The connector calls the passed in initCallback to tell Tableau it has finished initialization.</p>
      </li>
      <li>
        <p>The connector waits for interaction to be completed by the end user.  This could entail waiting for
the user authenticate, waiting for the user to enter some sort of data in a form, and more.
This is optional, if a connector has no need for user input, it can call submit() immediately.</p>
      </li>
      <li>
        <p>The connector calls the function tableau.submit(), which tells Tableau that the connector
is ready to finish the interactive phase.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="phase-two">Gather data phase: Fetch data from a web source</h2>

<ul>
  <li>
    <p>After the interactive phase has been completed, Tableau will launch the web data connector
  in a new, headless (meaning without UI) browser session.  The connector will now be in the 
  gather data phase.  This phase can be launched from Tableau Desktop, Tableau Server, Tableau Online,
  or the Simulator.</p>

    <p>In the gather data phase, the following actions occur:</p>

    <ul>
      <li>
        <p>The connector’s init method is called by Tableau, just as it was in the interactive phase. 
The connector may want to take different action in the init method in the gather data phase than
it did in the interactive phase.  At any time, the current phase of the connector can be read
through the <a href="/ref/api_ref#webdataconnectorapi.tableau.phase">tableau.phase</a>
property.</p>
      </li>
      <li>
        <p>The connector calls the passed in initCallback to tell Tableau it has finished initialization.</p>
      </li>
      <li>
        <p>Tableau first calls the 
<a href="/ref/api_ref#webdataconnectorapi.webdataconnector.getschema">getSchema</a>
method, which you define for your connector to map web data to table columns in Tableau.</p>
      </li>
      <li>
        <p>The connector will call schemaCallback with a schema object, which passes
the connector’s schema back to Tableau.</p>
      </li>
      <li>
        <p>Tableau then calls the <a href="/ref/api_ref#webdataconnectorapi.webdataconnector.getdata">getData</a> method of the connector to get the actual 
data. The getData method will be called by Tableau once for each table that 
has been selected by the end user. For example, if a user drags out two tables
from the web data connector into the join canvas in Tableau, getData will be called
twice.</p>
      </li>
      <li>
        <p>The getData method receives a table object as a parameter.  In the getData
method, the WDC needs to fetch data for that specific table from the web data source,
and use the <a href="/ref/api_ref#webdataconnectorapi.table.appendrows">table.appendRows</a> 
method to pass data for that table back to Tableau.</p>
      </li>
      <li>
        <p>Once all the data has been fetched for the current table, the WDC should call the passed
in dataDoneCallback().  At this point, Tableau will go back and call getData for another 
table if necessary.  If not, the WDC flow is completed and data can now be 
analyzed within Tableau.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="phase-three">Authentication phase: Display authentication UI when needed</h2>

<p>The authentication phase is an optional phase which Tableau uses to refresh extracts that require authentication. Rather than reload the connector and get the schema again, Tableau runs the authentication phase to only display the user interface required for authentication. 
refresh a data extract that the connector created. When an extract must</p>

<p><strong>Note</strong>: This is not really a third phase, because it does not follow the other
two; it’s an alternative to the first phase.</p>

<p>In this mode, the connector should display only the UI that is required in order to get an updated
token.  Updates to properties other than <code class="highlighter-rouge">tableau.username</code> and <code class="highlighter-rouge">tableau.password</code>
will be ignored during this phase.</p>

<p>For more information, on how to use the authentication phase, see <a href="/docs/wdc_authentication.html">WDC Authentication</a>.</p>


  </div>

</article>

</div>
<script src="/js/api_ref.min.js"></script>
<script src="/js/extra.js"></script>
</body>
</html> 

        
        
    </div> 
  </body>
</html>
