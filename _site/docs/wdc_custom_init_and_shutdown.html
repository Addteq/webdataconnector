<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Custom Initialization and Shutdown Code</title>
  <meta name="description" content="Connect to your web data from Tableau.">

  <link rel="shortcut icon" type="image/png" href="/assets/logo.png">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/api_ref.css">
  <link rel="stylesheet" href="/css/github-highlight.css">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

  <body>
    <div class="container">
        <header class="site-header">
  <div class="wrapper">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand navbar-brand-logo" href="/#">Tableau Web Data Connector</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/docs/">Docs</a></li>
            <li><a href="/ref/api_ref">API Reference</a></li>
            <li><a href="/community/community_home">Community Connectors</a></li>
            <li><a href="/news/news_home">What's New?</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="tableauIcon"><a target="_blank" href="http://tableau.com"><img src="/assets/logo.png" alt="Tableau Developers" class="logo" /></a></li>
            <li><a target="_blank" href="https://github.com/tableau/webdataconnector"><span class="icon icon--github" title="WDC on GitHub" alt="WDC on GitHub"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  </div>
</header>

        
            <html class="minimal">
<body>
<nav class="tsd-navigation secondary">
	<ul>
		<li>
			<h5>Overview</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs" class="tsd-kind-icon">Get Started</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_tutorial" class="tsd-kind-icon">Tutorial</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_use_in_tableau" class="tsd-kind-icon">Use a WDC in Tableau</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Basic Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_phases" class="tsd-kind-icon">WDC Lifecycle and Phases</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_simulator" class="tsd-kind-icon">Simulator and Samples</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_library_versions" class="tsd-kind-icon">API Versioning</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_hosting_and_submissions" class="tsd-kind-icon">Hosting and Submitting to Community Portal</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Advanced Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_custom_init_and_shutdown" class="tsd-kind-icon">Custom Initialization and Shutdown</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_incremental_refresh" class="tsd-kind-icon">Incremental Refresh</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_authentication" class="tsd-kind-icon">WDC Authentication</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_cors" class="tsd-kind-icon">Working with CORS</a>
				</li>
			</ul>
        </li>
        <li>
			<h5>Advanced Tutorials</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_multi_table_tutorial" class="tsd-kind-icon">Multi Table Tutorial</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_oauth_tutorial" class="tsd-kind-icon">Node Proxy with OAuth 2.0 Tutorial</a>
				</li>-->
            </ul>
        </li>
        <li>
			<h5>Reference</h5>
			<ul>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a target="_blank" href="/ref/api_ref" class="tsd-kind-icon">API Reference</a>
                </li>-->
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_ref_date_formats" class="tsd-kind-icon">Supported Date Formats</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_resources" class="tsd-kind-icon">Resources</a>
				</li>-->
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_faq" class="tsd-kind-icon">FAQ</a>
				</li>
            </ul>
        </li>
    <ul>
</nav>
<div class="content-wrap docs-content-wrap">
    <h1>Custom Initialization and Shutdown Code</h1>
    <article class="post">

  <div class="post-content">
    <p>Your code might need to open a resource or perform a setup task for the
data source. If so, you can run initialization code that is invoked at
the beginning of each phase. If you don’t need custom initialization
logic, you don’t need to do anything; code in the Tableau JavaScript
library includes default initialization logic for you.</p>

<p>To implement custom initialization, you create an
<a href="/ref/api_ref#webdataconnectorapi.webdataconnector.init">init</a> function for your connector. In the
function, run your initialization code. When initialization is complete,
call <a href="/ref/api_ref#webdataconnectorapi.initcallback">tableau.initCallback</a>
to tell Tableau that initialization is finished, as in this example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>myConnector.init = function(){
    // Your init code here
    tableau.initCallback();
};
</code></pre>
</div>

<p>One typical scenario for using custom initialization code is to tell tableau about 
the auth needs of your connector.  Please see
<a href="/docs/wdc_authentication.html">WDC Authentication</a>
for details on this.</p>

<p>Similarly, if your connector needs to perform custom shutdown logic, you
create a <a href="/ref/api_ref#webdataconnectorapi.webdataconnector.shutdown">shutdown</a> function for the
connection. When the shutdown process is complete, call the
<a href="/ref/api_ref#webdataconnectorapi.shutdowncallback">tableau.shutdownCallback</a>,
as in this example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>myConnector.shutdown = function() {
    // Your shutdown code here
    tableau.shutdownCallback();
}
</code></pre>
</div>

<p>As with initialization, if you don’t need custom shutdown logic, you can
leave this out, because the code in the Tableau JavaScript library takes
care of it for you.</p>

<p>The initialization or shutdown code is called once per phase. The code
is called during the interaction phase and again during the
gather data phase. If your initialization or shutdown code depends on
which phase the connector is in, you can test the
<a href="/ref/api_ref#webdataconnectorapi.phaseenum">tableau.phase</a> property. This
property returns a string value that indicates the phase that the
connector is in: <span class="api-command-ref">tableau.phaseEnum.interactivePhase</span>, <span class="api-command-ref">tableau.phaseEnum.gatherDataPhase</span>, or
<span class="api-command-ref">tableau.phaseEnum.authPhase</span>. The
following example shows how to use this property.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">myConnector</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">tableau</span><span class="p">.</span><span class="nx">initCallback</span><span class="p">();</span>
   <span class="k">if</span><span class="p">(</span><span class="nx">tableau</span><span class="p">.</span><span class="nx">phase</span> <span class="o">==</span> <span class="nx">tableau</span><span class="p">.</span><span class="nx">phaseEnum</span><span class="p">.</span><span class="nx">interactivePhase</span> <span class="o">||</span> <span class="nx">tableau</span><span class="p">.</span><span class="nx">phase</span> <span class="o">==</span> <span class="nx">tableau</span><span class="p">.</span><span class="nx">phaseEnum</span><span class="p">.</span><span class="nx">authPhase</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">tableau</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

<h3 id="run-without-interaction">Running the connector without user interaction</h3>

<p>If your connector doesn’t require user input, you don’t need to create a user interface for your connector. You just need to call <code class="highlighter-rouge">tableau.submit</code> when the connector has finished initializing. Include the following code to run a connector without user interaction:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">myConnector</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">tableau</span><span class="p">.</span><span class="nx">initCallback</span><span class="p">();</span>
    <span class="nx">tableau</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
<span class="p">};</span>
</code></pre>
</div>


  </div>

</article>

</div>
<script src="/js/api_ref.min.js"></script>
<script src="/js/extra.js"></script>
</body>
</html> 

        
        
    </div> 
  </body>
</html>
