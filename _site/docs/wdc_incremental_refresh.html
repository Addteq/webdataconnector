<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Incremental Refresh</title>
  <meta name="description" content="Connect to your web data from Tableau.">

  <link rel="shortcut icon" type="image/png" href="/assets/logo.png">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/api_ref.css">
  <link rel="stylesheet" href="/css/github-highlight.css">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

  <body>
    <div class="container">
        <header class="site-header">
  <div class="wrapper">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand navbar-brand-logo" href="/#">Tableau Web Data Connector</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/docs/">Docs</a></li>
            <li><a href="/ref/api_ref">API Reference</a></li>
            <li><a href="/community/community_home">Community Connectors</a></li>
            <li><a href="/news/news_home">What's New?</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="tableauIcon"><a target="_blank" href="http://tableau.com"><img src="/assets/logo.png" alt="Tableau Developers" class="logo" /></a></li>
            <li><a target="_blank" href="https://github.com/tableau/webdataconnector"><span class="icon icon--github" title="WDC on GitHub" alt="WDC on GitHub"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  </div>
</header>

        
            <html class="minimal">
<body>
<nav class="tsd-navigation secondary">
	<ul>
		<li>
			<h5>Overview</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs" class="tsd-kind-icon">Get Started</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_tutorial" class="tsd-kind-icon">Tutorial</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_use_in_tableau" class="tsd-kind-icon">Use a WDC in Tableau</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Basic Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_phases" class="tsd-kind-icon">WDC Lifecycle and Phases</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_simulator" class="tsd-kind-icon">Simulator and Samples</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_library_versions" class="tsd-kind-icon">API Versioning</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_hosting_and_submissions" class="tsd-kind-icon">Hosting and Submitting to Community Portal</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Advanced Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_custom_init_and_shutdown" class="tsd-kind-icon">Custom Initialization and Shutdown</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_incremental_refresh" class="tsd-kind-icon">Incremental Refresh</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_authentication" class="tsd-kind-icon">WDC Authentication</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_cors" class="tsd-kind-icon">Working with CORS</a>
				</li>
			</ul>
        </li>
        <li>
			<h5>Advanced Tutorials</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_multi_table_tutorial" class="tsd-kind-icon">Multi Table Tutorial</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_oauth_tutorial" class="tsd-kind-icon">Node Proxy with OAuth 2.0 Tutorial</a>
				</li>-->
            </ul>
        </li>
        <li>
			<h5>Reference</h5>
			<ul>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a target="_blank" href="/ref/api_ref" class="tsd-kind-icon">API Reference</a>
                </li>-->
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_ref_date_formats" class="tsd-kind-icon">Supported Date Formats</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_resources" class="tsd-kind-icon">Resources</a>
				</li>-->
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_faq" class="tsd-kind-icon">FAQ</a>
				</li>
            </ul>
        </li>
    <ul>
</nav>
<div class="content-wrap docs-content-wrap">
    <h1>Incremental Refresh</h1>
    <article class="post">

  <div class="post-content">
    <p>Tableau uses web data connectors to fetch data and store that data in an
extract. You can always refresh the entire extract. However, if you
implement incremental refresh, you can also fetch only the new data for
the extract, which can greatly reduce the time required to download the
data.</p>

<p>It is possible to enable incremental refresh functionality for any table
that is brought back by the web data connector.</p>

<p>To enable incremental refresh functionality on a table, you must set the 
<a href="/ref/api_ref#webdataconnectorapi.tableinfo-1.incrementcolumnid">tableInfo.incrementColumnId</a>
property on the tableInfo object for that table as defined in your
<a href="/ref/api_ref#webdataconnectorapi.webdataconnector.getschema">getSchema</a> function.
The incrementColumnId property should be set to the ID of the column that will be used as
the key for the incremental refresh.</p>

<p>For example, suppose you had a table with an ID field.
For every new record in the table, the ID is incremented by 1, and
no previous data is ever deleted or overwritten.  In that scenario, you would want the ID
column to be referenced by incrementColumnID.  That way, when gathering data, you can fetch
only the records that have an ID that is larger than the largest ID you have fetched
during the last gather data phase.</p>

<p>For example, here is the getSchema method of the IncrementalRefreshConnector dev sample:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">myConnector</span><span class="p">.</span><span class="nx">getSchema</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">schemaCallback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cols</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"id"</span><span class="p">,</span> <span class="na">dataType</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"x"</span><span class="p">,</span> <span class="na">dataType</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"day"</span><span class="p">,</span> <span class="na">dataType</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"day_and_time"</span><span class="p">,</span> <span class="na">dataType</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"true_or_false"</span><span class="p">,</span>  <span class="na">dataType</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"color"</span><span class="p">,</span> <span class="na">dataType</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">}</span>
    <span class="p">];</span>

    <span class="kd">var</span> <span class="nx">tableInfo</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">alias</span><span class="p">:</span> <span class="s2">"Incremental Refresh Connector"</span><span class="p">,</span>
        <span class="na">id</span><span class="p">:</span> <span class="s2">"mainTable"</span><span class="p">,</span>
        <span class="na">columns</span><span class="p">:</span> <span class="nx">cols</span><span class="p">,</span>
        <span class="na">incrementColumnId</span><span class="p">:</span> <span class="s2">"id"</span>
    <span class="p">};</span>
    
    <span class="nx">schemaCallback</span><span class="p">([</span><span class="nx">tableInfo</span><span class="p">]);</span>
<span class="p">};</span>
</code></pre>
</div>

<p>When Tableau calls the getData method of the connector, it passes in a table object.
If an incremental refresh is being request by the end user in Tableau, and if the 
<a href="/ref/api_ref#webdataconnectorapi.tableinfo-1.incrementcolumnid">tableInfo.incrementColumnId</a>
was set during the getSchema function for that table, then the table object will contain
a value in the <a href="/ref/api_ref#webdataconnectorapi.table.incrementvalue">table.incrementValue</a>
property.  This value will contain the current largest value from the increment column.</p>

<p>For example, this is how this property is utilized in the IncrementalRefreshConnector dev sample:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">myConnector</span><span class="p">.</span><span class="nx">getData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">table</span><span class="p">,</span> <span class="nx">doneCallback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">lastId</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">incrementValue</span> <span class="o">||</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    
    <span class="c1">// Gather only the most recent data with an ID greather than 'lastId'</span>
    <span class="c1">// ......</span>

    <span class="nx">table</span><span class="p">.</span><span class="nx">appendRows</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="nx">doneCallback</span><span class="p">();</span> 
<span class="p">};</span>
</code></pre>
</div>

<p>The WDC API supports three data types for the incremental refresh
column: DateTime, Date, and integer. For incremental refresh, you
typically use a field that represents a date, a timestamp, or a row
number.</p>

  </div>

</article>

</div>
<script src="/js/api_ref.min.js"></script>
<script src="/js/extra.js"></script>
</body>
</html> 

        
        
    </div> 
  </body>
</html>
