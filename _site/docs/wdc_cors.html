<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Managing Cross-Origin Resource Sharing (CORS) in Web Data Connectors</title>
  <meta name="description" content="Connect to your web data from Tableau.">

  <link rel="shortcut icon" type="image/png" href="/assets/logo.png">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/api_ref.css">
  <link rel="stylesheet" href="/css/github-highlight.css">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

  <body>
    <div class="container">
        <header class="site-header">
  <div class="wrapper">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand navbar-brand-logo" href="/#">Tableau Web Data Connector</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/docs/">Docs</a></li>
            <li><a href="/ref/api_ref">API Reference</a></li>
            <li><a href="/community/community_home">Community Connectors</a></li>
            <li><a href="/news/news_home">What's New?</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="tableauIcon"><a target="_blank" href="http://tableau.com"><img src="/assets/logo.png" alt="Tableau Developers" class="logo" /></a></li>
            <li><a target="_blank" href="https://github.com/tableau/webdataconnector"><span class="icon icon--github" title="WDC on GitHub" alt="WDC on GitHub"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  </div>
</header>

        
            <html class="minimal">
<body>
<nav class="tsd-navigation secondary">
	<ul>
		<li>
			<h5>Overview</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs" class="tsd-kind-icon">Get Started</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_tutorial" class="tsd-kind-icon">Tutorial</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_use_in_tableau" class="tsd-kind-icon">Use a WDC in Tableau</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Basic Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_phases" class="tsd-kind-icon">WDC Lifecycle and Phases</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_simulator" class="tsd-kind-icon">Simulator and Samples</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_library_versions" class="tsd-kind-icon">API Versioning</a>
				</li>
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_hosting_and_submissions" class="tsd-kind-icon">Hosting and Submitting to Community Portal</a>
				</li>
            </ul>
        </li>
        <li>
			<h5>Advanced Concepts</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_custom_init_and_shutdown" class="tsd-kind-icon">Custom Initialization and Shutdown</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_incremental_refresh" class="tsd-kind-icon">Incremental Refresh</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_authentication" class="tsd-kind-icon">WDC Authentication</a>
				</li>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_cors" class="tsd-kind-icon">Working with CORS</a>
				</li>
			</ul>
        </li>
        <li>
			<h5>Advanced Tutorials</h5>
			<ul>
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_multi_table_tutorial" class="tsd-kind-icon">Multi Table Tutorial</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_oauth_tutorial" class="tsd-kind-icon">Node Proxy with OAuth 2.0 Tutorial</a>
				</li>-->
            </ul>
        </li>
        <li>
			<h5>Reference</h5>
			<ul>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a target="_blank" href="/ref/api_ref" class="tsd-kind-icon">API Reference</a>
                </li>-->
                <li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_ref_date_formats" class="tsd-kind-icon">Supported Date Formats</a>
				</li>
				<!--<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_resources" class="tsd-kind-icon">Resources</a>
				</li>-->
				<li class="tsd-kind-property tsd-parent-kind-class">
					<a href="/docs/wdc_faq" class="tsd-kind-icon">FAQ</a>
				</li>
            </ul>
        </li>
    <ul>
</nav>
<div class="content-wrap docs-content-wrap">
    <h1>Managing Cross-Origin Resource Sharing (CORS) in Web Data Connectors</h1>
    <article class="post">

  <div class="post-content">
    <p>The JavaScript code in a web data connector typically makes requests to
a server that’s on a different domain than the one that’s hosting the
web data connector’s HTML page. That is, the code makes requests that
represent cross-origin resource sharing (CORS). As a security measure,
most browsers restrict CORS requests made from JavaScript code.</p>

<p>This restriction can result in errors when the web data connector runs.
For example, if you run your connector in Google Chrome and the code in
the connector makes requests to a site that doesn’t allow CORS requests,
the following error is displayed in the Chrome console:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>XMLHttpRequest cannot load URL. No 'Access-Control-Allow-Origin' header is present on the requested resource.
</code></pre>
</div>

<p>If your connector experiences CORS-related errors when trying to access
another site, you can try the approaches listed in this topic:</p>

<ul>
  <li>
    <p><a href="#request-access">Request CORS support from API Server</a></p>
  </li>
  <li>
    <p><a href="#jsonp">Make requests with JSONP</a></p>
  </li>
  <li>
    <p><a href="#proxy-server">Make requests through a proxy server</a></p>
  </li>
</ul>

<p><strong>Note</strong>: For information about how to use the Web Data Connector
simulator to help debug CORS errors, see <a href="wdc_simulator.html">Web Data Connector
Simulator</a>.</p>

<h2 id="request-access">Request CORS support from API Server</h2>

<p>To allow CORS requests, the server that hosts the data can set the
<code class="highlighter-rouge">Access-Control-Allow-Origin</code> header in the response. The header can be
set to specific domains (for example, <code class="highlighter-rouge">http://example.com</code>), or to <code class="highlighter-rouge">*</code>
to indicate that all domains are allowed access to the server’s data. To
get CORS support for requests from your connector, you can contact the
owners of the site that hosts the data you are querying and ask them to
add the <code class="highlighter-rouge">Access-Control-Allow-Origin</code> header with your domain in it, or
to add your domain if the site already sends the header.</p>

<p>For more information, see <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">HTTP access
control</a>
on the Mozilla Developer Network site.</p>

<h2 id="jsonp">Make requests with JSONP</h2>

<p>If the site that contains the data doesn’t support CORS, it’s often
possible to get data from the site by using <em>JSON with padding</em>, or
JSONP. JSONP provides an alternative to making requests directly in
JavaScript, since those are blocked. Instead, you use JavaScript to
dynamically create or update a <code class="highlighter-rouge">&lt;script&gt;</code> element and set its <code class="highlighter-rouge">src</code>
attribute to a URL that points to the site that has the data. The
URL also contains the name of a callback function that’s in the
connector page. If the site supports JSONP, the response includes the
data in JSON format, “padded” with a call to the callback function.</p>

<p>If you use jQuery in your web data connector, you can make JSONP calls
using the <span class="api-command-ref">ajax</span> function. For more
information, see <a href="http://api.jquery.com/jQuery.ajax/">jQuery.ajax()</a> on
the jQuery site.</p>

<p>If you aren’t using jQuery, you can implement JSONP in your JavaScript
code. For example, a connector might contain the following JavaScript
code, which dynamically creates a <code class="highlighter-rouge">&lt;script&gt;</code> element and sets its <code class="highlighter-rouge">src</code>
attribute to the URL of a server that has a fictional temperature
service. The URL includes various parameters; one of the parameters is
the name of a callback function. When the new <code class="highlighter-rouge">&lt;script&gt;</code> element is
created, the browser invokes the URL that the <code class="highlighter-rouge">src</code> attribute is set to.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var scriptTag = document.createElement('script');
scriptTag.src = "http://myserver/temperatures?city=Seattle&amp;year=2014&amp;callback=getTemperatures";
document.getElementsByTagName('head')[0].appendChild(scriptTag);
</code></pre>
</div>

<p>The connector must also include the following function, which is invoked
by the “padded” JSON that the temperature site returns. The JSON data is
passed to the function as the <span class="api-placeholder">jsonpData</span> parameter, and the code in the
function can extract values as it would from any JSON block.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var getTemperatures = function(jsonpData) {
    alert(jsonpData.someProperty);
    // More code here to extract the JSON data
}
</code></pre>
</div>

<p>For more information, see <a href="https://en.wikipedia.org/wiki/JSONP">JSONP</a>
on Wikipedia.</p>

<h2 id="proxy-server">Make requests through a proxy server</h2>

<p>Another option is to make requests from the web data connector’s
JavaScript code to a proxy server. Code that’s running on the proxy
server can make requests directly to the site where the data is—because
the proxy server is not running code in a browser, the code is not
limited by CORS restrictions. The JavaScript code in the browser can
then make requests to the proxy server instead of making requests
directly to the data site.</p>

<p>If the proxy server is in the same domain as the web data connector,
JavaScript in the connector page does not run into CORS restrictions. If
the proxy server is in another domain, the proxy server can be
configured to set the <code class="highlighter-rouge">Access-Control-Allow-Origin</code> header to allow
requests from the connector’s domain.</p>

<p>Some options for using a proxy are:</p>

<ul>
  <li>
    <p>Use a public proxy that is specifically designed for this purpose,
such as <a href="http://cors.io/">http://cors.io/.</a></p>
  </li>
  <li>
    <p>Download an existing proxy and run it locally on your computer. Many
proxies are available as open-source projects or free
software—search the web for “CORS proxy”.</p>
  </li>
  <li>
    <p>Create your own proxy - You can start with the <a href="/docs/wdc_oauth_tutorial.html">Node Proxy with OAuth Tutorial</a>
to get some starter code for this.  This tutorial will walk through using a node
proxy for performing authentication.  It could be extended to proxy data requests as well.</p>
  </li>
</ul>

<p><strong>Note</strong>: Creating and configuring a proxy server for this scenario
usually requires some custom programming. If you need assistance, see
the system administrator for your organization.</p>

  </div>

</article>

</div>
<script src="/js/api_ref.min.js"></script>
<script src="/js/extra.js"></script>
</body>
</html> 

        
        
    </div> 
  </body>
</html>
